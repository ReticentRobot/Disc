<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Disc.ViewModels"
             x:Class="Disc.Views.HomePage"
             x:DataType="viewmodels:PostsViewModel">

    <VerticalStackLayout>
        <Label 
            Text="Today"
            FontSize="20"
            VerticalOptions="Center" 
            HorizontalOptions="Start"
            TextTransform="Uppercase" />

        <!-- Loading -->
        <VerticalStackLayout
            IsVisible="{Binding State, Converter={StaticResource IsLoadingConverter}}">

            <ActivityIndicator
                IsRunning="{Binding State, Converter={StaticResource IsLoadingConverter}}" />

            <Label
                Text="Loading post data" />
        </VerticalStackLayout>

        <!-- Loaded -->
        <VerticalStackLayout
            IsVisible="{Binding State, Converter={StaticResource HasLoadedConverter}}">

            <Label
                VerticalOptions="Center" 
                HorizontalOptions="Center">
                <Label.FormattedText>
                    <FormattedString>
                        <Span
                            Text="{Binding Title}"
                            FontSize="60"/>
                    </FormattedString>
                </Label.FormattedText>
            </Label>

            <Label 
                Text="{Binding Body}"
                FontSize="20"
                VerticalOptions="Center" 
                HorizontalOptions="Center" />

        </VerticalStackLayout>

        <!-- Error -->
        <VerticalStackLayout
            IsVisible="{Binding State, Converter={StaticResource HasErrorConverter}}">

            <Label
                Text="Unable to load posts" />

            <Button
                Text="Retry"
                Command="{Binding LoadPostsCommand}" />

        </VerticalStackLayout>
    </VerticalStackLayout>
</ContentPage>